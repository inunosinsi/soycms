<div class="alert alert-success" soy:display="updated">更新しました</div>

<!-- soy:display="migrate_rollback" -->
<section style="margin:0px 0 20px 30px;">
	<p class="alert alert-info">データベースをMySQLからSQLiteに戻す方法</p>
	<ul style="list-style-type:disc;padding:5px 0;">
		<li><!-- soy:id="config_file_path" /-->を開き、<br>
			MySQLの接続情報からSQLiteの接続情報に戻します。<br>
			<pre style="padding:5px; border:1px solid #000000;">/* configure for mysql */
define("testshop_SOYSHOP_SITE_DSN","<!-- soy:id="new_dsn" /-->");
define("testshop_SOYSHOP_SITE_USER","<!-- soy:id="db_user" /-->");
define("testshop_SOYSHOP_SITE_PASS","**********");</pre>
			<p>上記を削除し</p>
			<pre style="padding:5px; border:1px solid #000000;">/* configure for sqlite */
define("testshop_SOYSHOP_SITE_DSN","<!-- soy:id="old_dsn" /-->");
define("testshop_SOYSHOP_SITE_USER","");
define("testshop_SOYSHOP_SITE_PASS","");</pre>
			<p>SQLiteの方の情報を追加して、ファイルを更新します。</p>
		</li>
		<li>
			ファイルの更新後に下記の実行ボタンを押した後、ログアウトして再びログインします。<br>
			<form soy:id="rollback_form">
				MySQL → SQLite <input type="submit" name="rollback" class="btn btn-primary" value="実行する">
				<input type="hidden" soy:id="sqlite_dbfile_path">
			</form>
		</li>
	</ul>
</section>
<!-- /soy:display="migrate_rollback" -->

<!-- soy:display="migrate_en_route" -->
<section style="margin:0px 0 20px 30px;">
	<div class="alert alert-warning">データベースの移行は完了していません。下記の変更を行って下さい。</div>
	<ul style="list-style-type:disc;margin-left:0px;">
		<li><!-- soy:id="config_file_path*" /-->を開き、<br>
			下記の参考にMySQLの接続情報を入力します。<br>
			<pre style="padding:5px; border:1px solid #000000;">/* configure for sqlite */
define("testshop_SOYSHOP_SITE_DSN","<!-- soy:id="old_dsn*" /-->");
define("testshop_SOYSHOP_SITE_USER","");
define("testshop_SOYSHOP_SITE_PASS","");</pre>
			<p>をコメントアウトし、</p>
			<pre style="padding:5px; border:1px solid #000000;">/* configure for mysql */
define("testshop_SOYSHOP_SITE_DSN","<!-- soy:id="new_dsn*" /-->");
define("testshop_SOYSHOP_SITE_USER","<!-- soy:id="db_user*" /-->");
define("testshop_SOYSHOP_SITE_PASS","**********");	//パスワードは実際に使用しているものを入力します</pre>
			<p>を追加して、ファイルを更新します。</p>
		</li>
		<li>・ログアウトし、再度ログインしてこのページに戻ってきて、設定が完了したことを確認できたら移行は終了です。</li>
	</ul>
</section>
<!-- /soy:display="migrate_en_route" -->

<!-- soy:display="migrate_button" -->
<section style="margin:0px 0 20px 30px;">
	<p class="alert alert-info">下記の実行するをクリックするとMySQLの指定のテーブルにデータをコピーします。</p>
	<form soy:id="migrate_form">
		<p>SQLite → MySQL <input type="submit" name="migrate" class="btn btn-primary" value="実行する">
	</form>
</section>
<!-- /soy:display="migrate_button" -->

<form soy:id="form">
	<div class="table-responsive">
		<table class="table table-striped" style="width:40%;">
			<caption>移行先MySQLの情報</caption>
			<col width="150px">
			<tr>
				<th>ホスト</th>
				<td><input type="text" soy:id="host"></td>
			</tr>
			<tr>
				<th nowrap>ポート番号(省略可)</th>
				<td><input type="text" soy:id="port"></td>
			</tr>
			<tr>
				<th>データベース名</th>
				<td><input type="text" soy:id="dbname"></td>
			</tr>
			<tr>
				<th>ユーザ名</th>
				<td><input type="text" soy:id="user"></td>
			</tr>
			<tr>
				<th>パスワード</th>
				<td><input type="password" soy:id="pass"></td>
			</tr>
		</table>
	</div>

	<div class="text-center">
		<input type="submit" class="btn btn-primary btn-lg" value="登録">
	</div>
</form>

<div>
	<h3>下記のプラグインのデータの移行には対応していません。</h3>
	<ul style="margin:5px 0 10px 30px;padding:5px 10px;border:1px solid #000000;width:300px;">
		<li>キャンペーンプラグイン</li>
		<li>自動売上ランキングプラグイン</li>
		<li>消費税別表示モジュール</li>
		<li>入荷通知プラグイン</li>
		<li>オーダーカスタムフィールド</li>
		<li>オーダーカスタムフィールド(日付)</li>
		<li>ポイント関連プラグイン一式</li>
		<li>セール価格期間設定プラグイン</li>
		<li>在庫数変更履歴プラグイン</li>
		<li>チケットプラグイン</li>
		<li>カスタムサーチフィールド</li>
		<li>クーポン自由設定プラグイン</li>
		<li>ダウンロード販売補助プラグイン</li>
		<li>マイページ用お問い合わせフォームプラグイン</li>
		<li>在庫管理プラグイン</li>
		<li>連絡掲示板プラグイン</li>
		<li>リンク切れページURL記録プラグイン</li>
		<li>簡易予約カレンダー</li>
		<li>返送伝票番号記録プラグイン</li>
		<li>伝票番号記録プラグイン</li>
		<li>ストレージプラグイン</li>
		<li>ユーザーカスタムサーチフィールド</li>
		<li>顧客グループプラグイン</li>
	</ul>
</div>
