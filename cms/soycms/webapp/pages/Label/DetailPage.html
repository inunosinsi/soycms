<!DOCTYPE html>
<html lang="ja">

<head soy:page="_common.HeaderPage" isOverWrite="true">
</head soy:page="_common.HeaderPage">

<body>

	<div id="wrapper">
		<!-- Navigation -->
		<nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0" soy:page="_common.UpperMenuPage">
			<!-- -->
		</nav>
		<div id="page-wrapper">
			<div class="row">
				<div class="col-lg-12">
					<h1 class="page-header"><small><a soy:link="Label">ラベル管理</a> &gt; </small>ラベル詳細</h1>
				</div>
				<!-- /.col-lg-12 -->
			</div>

			<div soy:page="_common.MessagePanel" isOverWrite="true"></div>

			<div class="row">
				<div class="col-lg-12">
					<form soy:id="update_form">
						<div class="form-group">
							<label>ラベル名</label>
							<input class="form-control" id="title" type="text" soy:id="caption" onblur="captionOnBlur(this);" />
							<p class="help-block">スラッシュ（/）で区切ることで階層化することができます。</p>
						</div>

						<div id="form-group">
							<p class="sub">アイコン</p>
							<div class="well col-lg-3">
								<img id="icon_preview" soy:id="label_icon" style="cursor:pointer;width:64px;height:64px" />
							</div>
							<input type="hidden" soy:id="icon" />
						</div>

						<div class="form-group" style="clear:both;">
							<label>URL(数字のみは使用できません)</label>
							<input class="form-control" id="alias" type="text" soy:id="alias" />
						</div>

						<div class="form-group" style="clear:both;">
							<label>メモ</label>
							<textarea class="form-control mceEditor" type="text" soy:id="description" cols="80" rows="5"></textarea>
						</div>

						<div class="form-group col-lg-3" style="padding-left: 0;">
							<label>文字色</label>
							<div class="input-group">
								<span class="input-group-addon">#</span>
								<input class="form-control" type="text" id="fcolor" soy:id="color" maxlength="6" />
							</div>
						</div>
						<div class="form-group col-lg-3">
							<label>背景色</label>
							<div class="input-group">
								<span class="input-group-addon">#</span>
								<input class="form-control" type="text" id="bcolor" soy:id="background_color" maxlength="6" />
							</div>
						</div>

						<div style="clear:both;"></div>

						<!-- soy:id="customfield" /-->

						<div class="form-group">
							<label>プレビュー</label>
							<div class="form-control-static">
								<span class="label label-default label-soy label-soy-lg" id="preview" soy:id="preview"></span>
							</div>
						</div>

						<div class="form-group">
							<input type="submit" value="更新" class="btn btn-primary btn-lg btn-block" />
						</div>

					</form soy:id="update_form">
				</div>
				<!-- /.col-lg-12 -->
			</div>

			<!-- soy:display="label_info" -->
			<div class="row mt-3 label_info">
				<div class="col-lg-12">
					<div class="alert alert-info">
						<p class="alert">
							このラベル「<!-- soy:id="caption_text" /-->」が使用されている箇所<br>
							<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> 他サイトブロックではページ名の取得ができません。<br>
							<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> ブログリンクブロックを使用しているとページ名が正しく出力されない場合があります。<br>
							<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> プラグインブロックは対象外です。<br>
							<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span> ブロック設定を削除していない場合はリストに表示されます。</p>
						</p>
						<!-- soy:display="used_block" -->
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">ページ / ブロック</h3>
							</div>
							<div class="panel-body">
								<ul class="list-group">
									<!-- soy:id="used_block_list" -->
									<li class="list-group-item">
										<span class="glyphicon glyphicon-file" aria-hidden="true"></span>
										<!-- soy:id="page_title" /-->
										(
										<!-- soy:id="block_name" /-->)
										<span class="badge custom">
											<!-- soy:id="block_soy_id" /--></span>

									</li>
									<!-- /soy:id="used_block_list" -->
								</ul>
							</div>
						</div>
						<!-- /soy:display="used_block" -->

						<!-- soy:display="used_blog" -->
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title">ブログの設定</h3>
							</div>

							<div class="panel-body">
								<!-- soy:display="used_blog_label" -->
								<div class="panel panel-default">
									<div class="panel-heading">
										<h4 class="panel-title">ブログに使用するラベルとして</h4>
									</div>
									<div class="panel-body">
										<ul class="list-group">
											<!-- soy:id="used_blog_label_list" -->
											<li class="list-group-item"><span class="glyphicon glyphicon-file" aria-hidden="true"></span> <!-- soy:id="page_title" /-->
											</li>
											<!-- /soy:id="used_blog_label_list" -->
										</ul>
									</div>
								</div>
								<!-- /soy:display="used_blog_label" -->

								<!-- soy:display="used_blog_category" -->
								<div class="panel panel-default">
									<div class="panel-heading">
										<h4 class="panel-title">カテゴリ分けで使用するラベルとして</h4>
									</div>
									<div class="panel-body">
										<ul class="list-group">
											<!-- soy:id="used_blog_category_list" -->
											<li class="list-group-item"><span class="glyphicon glyphicon-file" aria-hidden="true"></span> <!-- soy:id="page_title" /-->
											</li>
											<!-- /soy:id="used_blog_category_list" -->
										</ul>
									</div>
								</div>
								<!-- /soy:display="used_blog_category" -->
							</div>

						</div>
						<!-- /soy:display="used_blog" -->
					</div>
				</div>
			</div>
			<!-- /soy:display="label_info" -->

		</div>
		<!-- /#page-wrapper -->
		<!-- soy:page="_common.FooterPage" /-->
	</div>
	<!-- /#wrapper -->


	<div id="image_list" style="width:100%;height:100%;display:none;">
		<span soy:id="image_list" class="label_icon">
			<img soy:id="image_list_icon">
		</span soy:id="image_list">
	</div>

	<script soy:id="colorpicker"></script>

	<script lang="text/javascript">
		$("#fcolor").ColorPicker({
			color: "#" + $("#fcolor").val(),
			onChange: function(hsb, hex, rgb) {
				$("#fcolor").val(hex.toUpperCase());
				$("#preview").css("color", "#" + hex);
			}
		});
		$("#bcolor").ColorPicker({
			color: "#" + $("#bcolor").val(),
			onChange: function(hsb, hex, rgb) {
				$("#bcolor").val(hex.toUpperCase());
				$("#preview").css("background", "#" + hex);
			}
		});

		function captionOnBlur(input) {
			$("#preview").html($("<div>").text($(input).val()).html());
		}

		function changeImageIcon(id) {
			common_element_to_layer($("#image_list"), {
				width: 600,
				height: 400,
				onclose: function() {
					$("body").append($("#image_list"));
					$("#image_list").hide();
				},
				header: "適用したいアイコンをダブルクリックしてください",
			});
			$("#image_list").attr("label_id", id);
			$("#image_list").show();
		}

		function postChangeLabelIcon(ele, filename) {
			$("#labelicon").val(filename);
			$("#icon_preview").attr("src", ele.src);
			common_close_layer();
			return false;
		}
	</script>

	<!-- soy:id="entry_editor_javascripts" /-->

</body>

</html>
